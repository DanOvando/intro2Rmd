---
title: "Introduction to R Markdown"
subtitle: "Hands-on"
author: "Villase√±or-Derbez, J.C."
date: "Nov 1^st^, 2017"
output: html_notebook
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Hands-on

## References

You need:

- A bibTex file (provided in the CourseMaterials folder)
- That's it...

"A tidy dataset has one column per variable" `[@wickham_2014]`

"A tidy dataset has one column per variable" [@wickham_2014]

**References**

<div id="refs"></div>

- [Citation style library](http://editor.citationstyles.org/about/)

- Tyler Clavelle has a great [tutorial](https://tclavelle.github.io/blog/reference_tips/) on this

## Load packages

```{r}
suppressPackageStartupMessages({
  library(stargazer)
  library(knitr)
  library(kableExtra)
})
```

## Code chunks and in-line code

- `There were "r nrow(mtcars)" cars studied`
- There were `r nrow(mtcars)` cars studied

- Used to isolate plain text from code
- Allow you to execute R, Python, Rcpp, SQL, and Stan within your file
- Use `Ctrl` + `Alt` + `I` (Windows) `Cmd` + `Alt` + `I` (Mac) to insert
- Always name your chunks!

## Code chunk options
- `echo` hides code from output
- `eval` evaluate chunk?
- `fig.width`
- `fig.height`
- `fig.cap` To add figure caption

## `echo = TRUE`

```{r fit lm, echo = TRUE}
model <- lm(mpg ~ disp, mtcars)
summary(model)
```

## `echo = FALSE`

```{r fit lm again, echo = FALSE}
model <- lm(mpg ~ disp, mtcars)
summary(model)
```

## Fancier way to report models with `stargazer` {.smaller}

```{r use stargazer, results= 'asis'}
stargazer::stargazer(model, type = "html")
```

## Fancier way to report models with `stargazer` {.smaller}

```{r use fancy stargazer, results= 'asis'}
stargazer::stargazer(model,
                     title = "Results of regressing miles per galon on displacement",
                     type = "html",
                     single.row = T,
                     covariate.labels = "Displacement (cu. in.)",
                     omit.stat = "adj.rsq")
```

- Awesome [examples by Jake Russ](http://www.jakeruss.com/cheatsheets/stargazer/)

## Figures with code

```{r plot, echo = TRUE, fig.cap = "This is my caption"}
plot(mtcars$disp, mtcars$mpg, col = mtcars$cyl, pch = 20)
```

## Tables {.smaller}

- You can create raw markdown tables:

You type this:

```
First Header  | Second Header
------------- | -------------
Content Cell  | Content Cell
Content Cell  | Content Cell
```

It looks like this:

First Header  | Second Header
------------- | -------------
Content Cell  | Content Cell
Content Cell  | Content Cell

## Tables

- The above was not great for tables that summarize data, instead, use `knitr::kable()`
- Using the `taxa_table.csv` file in the `CourseMaterials`

## Tables {.smaller}

```{r first table}
taxa_table <- read.csv("taxa_table.csv")

knitr::kable(taxa_table)
```

## California's State Fish {.smaller}

![Juvenile Garibaldi (*Hypsypops rubicundus*)](http://www.fishbase.org/images/species/Hyrub_j0.jpg)

- October 15, 1995, Adopted as the California State Marine Fish

## Fancier tables with `kableExtra` {.smaller}

But scientific names (*Genus species*) are supposed to be in itallics!

- Specify format by columns

```{r fancier table}
knitr::kable(taxa_table, format = "html") %>% 
  kableExtra::kable_styling() %>% 
  kableExtra::column_spec(column = 2, italic = T) %>% 
  kableExtra::column_spec(column = 3, italic = T) %>% 
  kableExtra::column_spec(column = 4, bold = T)
```

## Fancier tables with `kableExtra` {.smaller}

- Collapse rows

```{r fancier fancier table}
knitr::kable(taxa_table, format = "html") %>% 
  kableExtra::kable_styling() %>% 
  kableExtra::column_spec(column = 2, italic = T) %>% 
  kableExtra::column_spec(column = 3, italic = T) %>% 
  kableExtra::column_spec(column = 4, bold = T) %>% 
  kableExtra::collapse_rows(columns = c(1,2))
```

## Short example of workflow


## Resources

- [R Markdown from RStudio tutorial](http://rmarkdown.rstudio.com/lesson-1.html)

# Show and tell

## Show and tell

- `<div id="refs"></div>` to specify placement of references (*i.e.* when you are writing a manuscript)
- To add line numbers and doblespacing to your manuscript, add to the YAML:

```
header-includes:
- \usepackage{setspace}
- \doublespacing
- \usepackage{lineno}
- \linenumbers
```
